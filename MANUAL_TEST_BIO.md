# 自己紹介文機能 - マニュアルテストガイド

## 概要
ユーザーが設定ページで自己紹介文を設定・編集できる機能を実装しました。

## 実装内容

### データベース変更
- `User` テーブルに `bio` フィールド（String?, nullable）を追加

### 新規作成ファイル
1. `app/action/updateBio.ts` - 自己紹介文更新サーバーアクション
2. `components/feature/setting/ChangeBioForm.tsx` - 自己紹介文編集フォーム
3. `components/feature/setting/ChangeBioDialog.tsx` - 自己紹介文編集ダイアログ
4. `__tests__/bio-schema.test.ts` - バリデーションテスト

### 更新ファイル
1. `prisma/schema.prisma` - User モデルに bio フィールド追加
2. `schema.ts` - bioSchema バリデーション追加（100文字制限）
3. `components/feature/setting/UserInfo.tsx` - 設定ページのbio表示・編集機能
4. `components/feature/user/UserInfo.tsx` - ユーザーページのbio表示機能

## セットアップ手順

1. データベースマイグレーション実行:
```bash
npx prisma db push
```

2. Prismaクライアント生成:
```bash
npx prisma generate
```

3. アプリケーション起動:
```bash
npm run dev
```

## マニュアルテスト手順

### 1. 設定ページでの自己紹介文設定
1. ログイン後、設定ページ (`/setting`) にアクセス
2. ユーザー名の下に「自己紹介文が設定されていません。自己紹介文を設定しよう！」と灰色で表示されることを確認
3. 自己紹介文の横にある編集アイコン（ペン）をクリック
4. モーダルダイアログが開くことを確認
5. テキストエリアに自己紹介文を入力
6. 文字数カウンター（xx/100）が正しく表示されることを確認

### 2. バリデーションテスト
1. 100文字以内の文字を入力し、「変更」ボタンが有効になることを確認
2. 101文字以上入力し、文字数が赤色で表示されることを確認
3. 101文字以上の状態で「変更」ボタンが無効になることを確認
4. エラーメッセージ「100文字を超えています。」が表示されることを確認

### 3. 自己紹介文の保存・表示
1. 有効な自己紹介文を入力し「変更」ボタンをクリック
2. 成功メッセージ「自己紹介文を変更しました。」が表示されることを確認
3. モーダルが閉じることを確認
4. 設定ページで入力した自己紹介文が表示されることを確認
5. プレースホルダーテキストが消えることを確認

### 4. ユーザーページでの表示
1. 自分のユーザーページにアクセス
2. ユーザー名の下に自己紹介文が表示されることを確認
3. 他のユーザーで自己紹介文が未設定の場合、何も表示されないことを確認

### 5. 自己紹介文の編集
1. 設定ページで既存の自己紹介文の編集アイコンをクリック
2. 現在の自己紹介文がテキストエリアに表示されることを確認
3. 内容を変更して保存
4. 変更が正しく反映されることを確認

### 6. 自己紹介文の削除
1. 設定ページで自己紹介文を空文字にして保存
2. プレースホルダーテキストが再び表示されることを確認
3. ユーザーページで自己紹介文が表示されないことを確認

## 期待される動作

### 設定ページ
- **未設定時**: 「自己紹介文が設定されていません。自己紹介文を設定しよう！」を灰色で表示
- **設定済み**: 自己紹介文を通常の文字色で表示
- **編集**: ペンアイコンクリックでモーダル表示

### ユーザーページ
- **未設定時**: 何も表示しない
- **設定済み**: 自己紹介文を表示

### バリデーション
- 100文字以内: 有効
- 101文字以上: エラー（赤色表示、送信無効）
- 空文字: 有効（nullとして保存）

## トラブルシューティング

### よくある問題
1. **Prismaエラー**: `npx prisma generate` を実行してクライアントを再生成
2. **型エラー**: TypeScriptキャッシュクリア: `rm -rf .next && npm run dev`
3. **データが表示されない**: ブラウザでハードリフレッシュ（Ctrl+Shift+R）

### 確認ポイント
- データベースにbioカラムが追加されているか
- Prismaクライアントが最新か
- ブラウザのキャッシュが古くないか